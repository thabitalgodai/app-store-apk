<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تفاصيل التطبيق - متجر التطبيقات</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Roboto', sans-serif;
    }

    body {
      background: #f8f9fa;
      color: #3c4043;
    }

    /* التولبار العلوي */
    .toolbar {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      background: white;
      padding: 12px 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
      z-index: 1000;
    }

    .toolbar-icon {
      color: #5f6368;
      cursor: pointer;
      font-size: 24px;
    }

    .page-title {
      flex: 1;
      font-size: 15px;
      font-weight: 500;
    }

    /* قائمة المشاركة */
    .share-menu {
      position: absolute;
      top: 50px;
      right: 16px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      padding: 8px 0;
      display: none;
      z-index: 1001;
      min-width: 140px;
    }

    .share-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      font-size: 14px;
      color: #3c4043;
      cursor: pointer;
      transition: background 0.2s;
    }

    .share-item:hover {
      background: #f8f9fa;
    }

    /* محتوى الصفحة */
    .app-header {
      background: white;
      padding: 24px 16px;
      margin-top: 60px;
      display: flex;
      gap: 24px;
      align-items: flex-start;
    }

    .app-icon {
      width: 96px;
      height: 96px;
      border-radius: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .header-info {
      flex: 1;
      min-width: 0;
    }

    .app-title {
      font-size: 22px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .developer {
      color: #5f6368;
      font-size: 14px;
      margin-bottom: 12px;
    }

    .rating-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .rating-stars {
      color: #fbbc04;
      font-size: 16px;
      letter-spacing: -2px;
    }

    .rating-text {
      color: #5f6368;
      font-size: 14px;
    }

    .install-btn {
      background: #1a73e8;
      color: white;
      border: none;
      padding: 10px 24px;
      border-radius: 24px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .install-btn:hover {
      background: #1557b0;
    }

    .screenshots-container {
      padding: 16px;
      background: white;
      margin: 16px 0;
    }

    .screenshots-scroll {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding-bottom: 8px;
    }

    .screenshot {
      height: 240px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      flex-shrink: 0;
    }

    .description-section {
      background: white;
      padding: 24px 16px;
      margin: 16px 0;
    }

    .section-title {
      font-size: 16px;
      font-weight: 500;
      margin-bottom: 16px;
    }

    .description-text {
      color: #5f6368;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .details-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      background: white;
      padding: 16px;
      margin: 16px 0;
      border-radius: 12px;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .detail-label {
      color: #5f6368;
      font-size: 14px;
    }

    .detail-value {
      color: #3c4043;
      font-weight: 500;
      font-size: 14px;
    }

    @media (max-width: 600px) {
      .app-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .header-info {
        width: 100%;
      }

      .rating-container {
        justify-content: center;
      }

      .install-btn {
        width: 100%;
        justify-content: center;
      }

      .screenshot {
        height: 180px;
      }

      .details-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- التولبار العلوي -->
  <div class="toolbar">
    <i class="material-icons-round toolbar-icon" onclick="toggleShareMenu()">menu</i>
    <span class="page-title">تفاصيل التطبيق</span>
    <i class="material-icons-round toolbar-icon" onclick="window.history.back()">arrow_back</i>
    
    <!-- قائمة المشاركة -->
    <div class="share-menu" id="shareMenu">
      <div class="share-item" onclick="shareNative()">
        <i class="material-icons-round" style="color: #5f6368;">share</i>
        مشاركة
      </div>
      <div class="share-item" onclick="copyLink()">
        <i class="material-icons-round" style="color: #5f6368;">link</i>
        نسخ الرابط
      </div>
      <div class="share-item" onclick="shareViaWhatsApp()">
        <img src="https://cdn-icons-png.flaticon.com/512/1384/1384023.png" width="20" alt="واتساب">
        واتساب
      </div>
    </div>
  </div>

  <!-- الهيدر الرئيسي -->
  <div class="app-header">
    <img id="appIcon" class="app-icon" src="" alt="App Icon">
    <div class="header-info">
      <h1 class="app-title" id="appTitle"></h1>
      <div class="developer" id="developer">مطور التطبيق</div>
      <div class="rating-container">
        <div class="rating-stars" id="ratingStars"></div>
        <span class="rating-text" id="ratingText"></span>
      </div>
      <button class="install-btn" id="installBtn">
        <i class="material-icons-round">get_app</i>
        <span>تثبيت</span>
      </button>
    </div>
  </div>

  <!-- لقطات الشاشة -->
  <div class="screenshots-container">
    <div class="screenshots-scroll" id="screenshots"></div>
  </div>

  <!-- الوصف -->
  <div class="description-section">
    <h2 class="section-title">حول هذا التطبيق</h2>
    <p class="description-text" id="description"></p>
  </div>

  <!-- المعلومات الإضافية -->
  <div class="details-grid" id="detailsGrid"></div>

<script>
  // جلب البيانات من URL
  const urlParams = new URLSearchParams(window.location.search);
  
  // تعبئة البيانات الأساسية
  document.getElementById('appTitle').textContent = urlParams.get('title');
  document.getElementById('appIcon').src = urlParams.get('icon');
  document.getElementById('description').textContent = urlParams.get('dec');

  // معالجة التقييم
  const rating = parseFloat(urlParams.get('rating')) || 4.5;
  const stars = document.getElementById('ratingStars');
  stars.innerHTML = renderStars(rating);
  document.getElementById('ratingText').textContent = `${rating.toFixed(1)} • ١٠ ألف+ تنزيل`;

  function renderStars(rating) {
    const fullStars = Math.floor(rating);
    const halfStar = rating % 1 >= 0.5 ? 1 : 0;
    return '★'.repeat(fullStars) + (halfStar ? '½' : '') + '☆'.repeat(5 - fullStars - halfStar);
  }

  // لقطات الشاشة
  const screenshots = [
    urlParams.get('sc1'),
    urlParams.get('sc2'),
    urlParams.get('sc3')
  ].filter(Boolean);

  const container = document.getElementById('screenshots');
  screenshots.forEach(sc => {
    const img = document.createElement('img');
    img.className = 'screenshot';
    img.src = sc;
    img.alt = 'لقطة شاشة';
    container.appendChild(img);
  });

  // المعلومات الإضافية
  const details = {
    size: urlParams.get('size') || '15 م.ب',
    version: urlParams.get('version') || '1.0.0',
    updated: urlParams.get('updated') || '٢٤ مايو ٢٠٢٤',
    requires: urlParams.get('android') || 'أندرويد 8.0 أو أعلى',
    contentRating: '+3',
    time: urlParams.get('time') || 'غير معروف'
  };

  const grid = document.getElementById('detailsGrid');
  Object.entries(details).forEach(([key, value]) => {
    const div = document.createElement('div');
    div.className = 'detail-item';
    div.innerHTML = `
      <span class="detail-label">${getLabel(key)}</span>
      <span class="detail-value">${value}</span>
    `;
    grid.appendChild(div);
  });

  function getLabel(key) {
    const labels = {
      size: 'الحجم',
      version: 'الإصدار',
      updated: 'تم التحديث',
      requires: 'إصدار أندرويد',
      contentRating: 'التصنيف العمري',
      time: 'رفع بتاريخ'
    };
    return labels[key] || key;
  }

  // زر التثبيت
  document.getElementById('installBtn').addEventListener('click', () => {
    const link = urlParams.get('project');
    if (link && link.startsWith('http')) {
      window.open(link, '_blank');
    } else {
      alert('رابط التحميل غير متوفر حالياً');
    }
  });

  // وظائف المشاركة
  function toggleShareMenu() {
    const menu = document.getElementById('shareMenu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  }

  window.addEventListener('click', function(e) {
    if (!document.getElementById('shareMenu').contains(e.target) && 
        !e.target.closest('.toolbar-icon')) {
      document.getElementById('shareMenu').style.display = 'none';
    }
  });

  function shareViaWhatsApp() {
    const url = encodeURIComponent(window.location.href);
    window.open(`https://wa.me/?text=${url}`, '_blank');
  }

  function copyLink() {
    navigator.clipboard.writeText(window.location.href);
    alert('تم نسخ الرابط بنجاح');
    toggleShareMenu();
  }

  function shareNative() {
    if (navigator.share) {
      navigator.share({
        title: document.getElementById('appTitle').textContent,
        text: 'تحميل تطبيق ' + document.getElementById('appTitle').textContent,
        url: window.location.href
      });
    } else {
      copyLink();
    }
  }
</script>

</body>
</html>